"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/auth/[...nextauth]";
exports.ids = ["pages/api/auth/[...nextauth]"];
exports.modules = {

/***/ "firebase-admin/app":
/*!*************************************!*\
  !*** external "firebase-admin/app" ***!
  \*************************************/
/***/ ((module) => {

module.exports = require("firebase-admin/app");

/***/ }),

/***/ "firebase-admin/firestore":
/*!*******************************************!*\
  !*** external "firebase-admin/firestore" ***!
  \*******************************************/
/***/ ((module) => {

module.exports = require("firebase-admin/firestore");

/***/ }),

/***/ "next-auth":
/*!****************************!*\
  !*** external "next-auth" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("next-auth");

/***/ }),

/***/ "next-auth/providers/google":
/*!*********************************************!*\
  !*** external "next-auth/providers/google" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/google");

/***/ }),

/***/ "../../../api-utils/node":
/*!*****************************************************!*\
  !*** external "next/dist/server/api-utils/node.js" ***!
  \*****************************************************/
/***/ ((module) => {

module.exports = require("next/dist/server/api-utils/node.js");

/***/ }),

/***/ "../route-module?407b":
/*!************************************************************************!*\
  !*** external "next/dist/server/future/route-modules/route-module.js" ***!
  \************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/server/future/route-modules/route-module.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/helpers.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/helpers.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("/**\n * Hoists a name from a module or promised module.\n *\n * @param module the module to hoist the name from\n * @param name the name to hoist\n * @returns the value on the module (or promised module)\n */ \nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"hoist\", ({\n    enumerable: true,\n    get: function() {\n        return hoist;\n    }\n}));\nfunction hoist(module, name) {\n    // If the name is available in the module, return it.\n    if (name in module) {\n        return module[name];\n    }\n    // If a property called `then` exists, assume it's a promise and\n    // return a promise that resolves to the name.\n    if (\"then\" in module && typeof module.then === \"function\") {\n        return module.then((mod)=>hoist(mod, name));\n    }\n    // If we're trying to hoise the default export, and the module is a function,\n    // return the module itself.\n    if (typeof module === \"function\" && name === \"default\") {\n        return module;\n    }\n    // Otherwise, return undefined.\n    return undefined;\n}\n\n//# sourceMappingURL=helpers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9oZWxwZXJzLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQWlCO0FBQ2pCLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLHlDQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsRUFBQztBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL3NoYXRlei1pbnRlcnZpZXctZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9oZWxwZXJzLmpzP2VlNTIiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBIb2lzdHMgYSBuYW1lIGZyb20gYSBtb2R1bGUgb3IgcHJvbWlzZWQgbW9kdWxlLlxuICpcbiAqIEBwYXJhbSBtb2R1bGUgdGhlIG1vZHVsZSB0byBob2lzdCB0aGUgbmFtZSBmcm9tXG4gKiBAcGFyYW0gbmFtZSB0aGUgbmFtZSB0byBob2lzdFxuICogQHJldHVybnMgdGhlIHZhbHVlIG9uIHRoZSBtb2R1bGUgKG9yIHByb21pc2VkIG1vZHVsZSlcbiAqLyBcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImhvaXN0XCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBob2lzdDtcbiAgICB9XG59KTtcbmZ1bmN0aW9uIGhvaXN0KG1vZHVsZSwgbmFtZSkge1xuICAgIC8vIElmIHRoZSBuYW1lIGlzIGF2YWlsYWJsZSBpbiB0aGUgbW9kdWxlLCByZXR1cm4gaXQuXG4gICAgaWYgKG5hbWUgaW4gbW9kdWxlKSB7XG4gICAgICAgIHJldHVybiBtb2R1bGVbbmFtZV07XG4gICAgfVxuICAgIC8vIElmIGEgcHJvcGVydHkgY2FsbGVkIGB0aGVuYCBleGlzdHMsIGFzc3VtZSBpdCdzIGEgcHJvbWlzZSBhbmRcbiAgICAvLyByZXR1cm4gYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIG5hbWUuXG4gICAgaWYgKFwidGhlblwiIGluIG1vZHVsZSAmJiB0eXBlb2YgbW9kdWxlLnRoZW4gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gbW9kdWxlLnRoZW4oKG1vZCk9PmhvaXN0KG1vZCwgbmFtZSkpO1xuICAgIH1cbiAgICAvLyBJZiB3ZSdyZSB0cnlpbmcgdG8gaG9pc2UgdGhlIGRlZmF1bHQgZXhwb3J0LCBhbmQgdGhlIG1vZHVsZSBpcyBhIGZ1bmN0aW9uLFxuICAgIC8vIHJldHVybiB0aGUgbW9kdWxlIGl0c2VsZi5cbiAgICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gXCJmdW5jdGlvblwiICYmIG5hbWUgPT09IFwiZGVmYXVsdFwiKSB7XG4gICAgICAgIHJldHVybiBtb2R1bGU7XG4gICAgfVxuICAgIC8vIE90aGVyd2lzZSwgcmV0dXJuIHVuZGVmaW5lZC5cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1oZWxwZXJzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/helpers.js\n");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2F%5B...nextauth%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth%5C%5B...nextauth%5D.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2F%5B...nextauth%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth%5C%5B...nextauth%5D.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_webpack_loaders_next_route_loader_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/webpack/loaders/next-route-loader/helpers */ \"(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/helpers.js\");\n/* harmony import */ var _pages_api_auth_nextauth_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\auth\\[...nextauth].ts */ \"(api)/./pages/api/auth/[...nextauth].ts\");\n// @ts-ignore this need to be imported from next/dist to be external\n\n\n\nconst PagesAPIRouteModule = next_dist_server_future_route_modules_pages_api_module__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule;\n// Import the userland code.\n// @ts-expect-error - replaced by webpack/turbopack loader\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_webpack_loaders_next_route_loader_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_auth_nextauth_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_webpack_loaders_next_route_loader_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_auth_nextauth_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/auth/[...nextauth]\",\n        pathname: \"/api/auth/[...nextauth]\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_auth_nextauth_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmF1dGglMkYlNUIuLi5uZXh0YXV0aCU1RCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDYXV0aCU1QyU1Qi4uLm5leHRhdXRoJTVELnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBQ2lGO0FBQ2xCO0FBQ21CO0FBQ2xGLDRCQUE0Qix1R0FBMEI7QUFDdEQ7QUFDQTtBQUNpRTtBQUNqRTtBQUNBLGlFQUFlLGdHQUFLLENBQUMsd0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSxnR0FBSyxDQUFDLHdEQUFRO0FBQ3BDO0FBQ087QUFDUDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL3NoYXRlei1pbnRlcnZpZXctZnJvbnRlbmQvPzBjNWUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQHRzLWlnbm9yZSB0aGlzIG5lZWQgdG8gYmUgaW1wb3J0ZWQgZnJvbSBuZXh0L2Rpc3QgdG8gYmUgZXh0ZXJuYWxcbmltcG9ydCAqIGFzIG1vZHVsZSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9oZWxwZXJzXCI7XG5jb25zdCBQYWdlc0FQSVJvdXRlTW9kdWxlID0gbW9kdWxlLlBhZ2VzQVBJUm91dGVNb2R1bGU7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG4vLyBAdHMtZXhwZWN0LWVycm9yIC0gcmVwbGFjZWQgYnkgd2VicGFjay90dXJib3BhY2sgbG9hZGVyXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxcYXV0aFxcXFxbLi4ubmV4dGF1dGhdLnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2F%5B...nextauth%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth%5C%5B...nextauth%5D.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/auth/[...nextauth].ts":
/*!*****************************************!*\
  !*** ./pages/api/auth/[...nextauth].ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _auth_firebase_adapter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @auth/firebase-adapter */ \"(api)/./node_modules/@auth/firebase-adapter/index.js\");\n/* harmony import */ var firebase_admin_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase-admin/app */ \"firebase-admin/app\");\n/* harmony import */ var firebase_admin_app__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(firebase_admin_app__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next-auth/providers/google */ \"next-auth/providers/google\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_google__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nconst authOptions = {\n    // Configure one or more authentication providers\n    providers: [\n        next_auth_providers_google__WEBPACK_IMPORTED_MODULE_3___default()({\n            clientId: process.env.GOOGLE_CLIENT_ID,\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET,\n            profile (profile) {\n                console.log(\"Google profile data:\", profile);\n                return {\n                    role: profile.email === \"work25355@gmail.com\" ? \"admin\" : \"user\",\n                    id: profile.sub,\n                    email: profile.email,\n                    image: profile.picture,\n                    name: profile.name\n                };\n            }\n        })\n    ],\n    callbacks: {\n        session ({ session, user }) {\n            session.user.role = user.role;\n            console.log(session);\n            return session;\n        // console.log(user)\n        }\n    },\n    // callbacks: {\n    //   async jwt(token, user) {\n    //     if (user) {\n    //       token.role = user.role;\n    //       // Add other properties if necessary\n    //     }\n    //     return token;\n    //   },\n    //   async session(session, token) {\n    //     session.user.role = token.role;\n    //     // Add other properties if necessary\n    //     return session;\n    //   },\n    // },\n    adapter: (0,_auth_firebase_adapter__WEBPACK_IMPORTED_MODULE_0__.FirestoreAdapter)({\n        credential: (0,firebase_admin_app__WEBPACK_IMPORTED_MODULE_1__.cert)({\n            projectId: process.env.FIREBASE_PROJECT_ID,\n            clientEmail: process.env.FIREBASE_CLIENT_EMAIL,\n            privateKey: process.env.FIREBASE_PRIVATE_KEY.replace(/\\\\n/g, \"\\n\")\n        })\n    })\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (next_auth__WEBPACK_IMPORTED_MODULE_2___default()(authOptions));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUEwRDtBQUNoQjtBQUNPO0FBRU87QUFLakQsTUFBTUksY0FBMkI7SUFDdEMsaURBQWlEO0lBQ2pEQyxXQUFXO1FBQ1RGLGlFQUFjQSxDQUFDO1lBQ2JHLFVBQVVDLFFBQVFDLEdBQUcsQ0FBQ0MsZ0JBQWdCO1lBQ3RDQyxjQUFjSCxRQUFRQyxHQUFHLENBQUNHLG9CQUFvQjtZQUM5Q0MsU0FBUUEsT0FBTztnQkFDYkMsUUFBUUMsR0FBRyxDQUFDLHdCQUF3QkY7Z0JBQ3BDLE9BQU87b0JBQUVHLE1BQU1ILFFBQVFJLEtBQUssS0FBRyx3QkFBeUIsVUFBUTtvQkFDaEVDLElBQUdMLFFBQVFNLEdBQUc7b0JBQ2RGLE9BQU1KLFFBQVFJLEtBQUs7b0JBQ25CRyxPQUFNUCxRQUFRUSxPQUFPO29CQUNyQkMsTUFBS1QsUUFBUVMsSUFBSTtnQkFDbkI7WUFDQTtRQUNGO0tBQ0Q7SUFDREMsV0FBVztRQUVUQyxTQUFRLEVBQUVBLE9BQU8sRUFBRUMsSUFBSSxFQUFFO1lBQ3ZCRCxRQUFRQyxJQUFJLENBQUNULElBQUksR0FBR1MsS0FBS1QsSUFBSTtZQUU3QkYsUUFBUUMsR0FBRyxDQUFDUztZQUNaLE9BQU9BO1FBQ1Asb0JBQW9CO1FBQ3RCO0lBRUY7SUFDQSxlQUFlO0lBQ2YsNkJBQTZCO0lBQzdCLGtCQUFrQjtJQUNsQixnQ0FBZ0M7SUFDaEMsNkNBQTZDO0lBQzdDLFFBQVE7SUFDUixvQkFBb0I7SUFDcEIsT0FBTztJQUNQLG9DQUFvQztJQUNwQyxzQ0FBc0M7SUFDdEMsMkNBQTJDO0lBQzNDLHNCQUFzQjtJQUN0QixPQUFPO0lBQ1AsS0FBSztJQUlMRSxTQUFTekIsd0VBQWdCQSxDQUFDO1FBQ3hCMEIsWUFBWXpCLHdEQUFJQSxDQUFDO1lBQ2YwQixXQUFXcEIsUUFBUUMsR0FBRyxDQUFDb0IsbUJBQW1CO1lBQzFDQyxhQUFhdEIsUUFBUUMsR0FBRyxDQUFDc0IscUJBQXFCO1lBQzlDQyxZQUFZeEIsUUFBUUMsR0FBRyxDQUFDd0Isb0JBQW9CLENBQUVDLE9BQU8sQ0FBQyxRQUFRO1FBQ2hFO0lBQ0Y7QUFDRixFQUFDO0FBQ0QsaUVBQWUvQixnREFBUUEsQ0FBQ0UsWUFBWUEsRUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL3NoYXRlei1pbnRlcnZpZXctZnJvbnRlbmQvLi9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdLnRzPzJlOGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmlyZXN0b3JlQWRhcHRlciB9IGZyb20gXCJAYXV0aC9maXJlYmFzZS1hZGFwdGVyXCI7XG5pbXBvcnQgeyBjZXJ0IH0gZnJvbSBcImZpcmViYXNlLWFkbWluL2FwcFwiO1xuaW1wb3J0IE5leHRBdXRoLCB7IEF1dGhPcHRpb25zIH0gZnJvbSBcIm5leHQtYXV0aFwiXG5pbXBvcnQgeyBBZGFwdGVyIH0gZnJvbSBcIm5leHQtYXV0aC9hZGFwdGVyc1wiO1xuaW1wb3J0IEdvb2dsZVByb3ZpZGVyIGZyb20gXCJuZXh0LWF1dGgvcHJvdmlkZXJzL2dvb2dsZVwiO1xuaW1wb3J0IEdvb2dsZSBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9nb29nbGVcIlxuXG5cblxuZXhwb3J0IGNvbnN0IGF1dGhPcHRpb25zOiBBdXRoT3B0aW9ucyA9IHtcbiAgLy8gQ29uZmlndXJlIG9uZSBvciBtb3JlIGF1dGhlbnRpY2F0aW9uIHByb3ZpZGVyc1xuICBwcm92aWRlcnM6IFtcbiAgICBHb29nbGVQcm92aWRlcih7XG4gICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9JRCEsXG4gICAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfU0VDUkVUISxcbiAgICAgIHByb2ZpbGUocHJvZmlsZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkdvb2dsZSBwcm9maWxlIGRhdGE6XCIsIHByb2ZpbGUpO1xuICAgICAgICByZXR1cm4geyByb2xlOiBwcm9maWxlLmVtYWlsPT09XCJ3b3JrMjUzNTVAZ21haWwuY29tXCIgID8gXCJhZG1pblwiOlwidXNlclwiLFxuICAgICAgICBpZDpwcm9maWxlLnN1YixcbiAgICAgICAgZW1haWw6cHJvZmlsZS5lbWFpbCxcbiAgICAgICAgaW1hZ2U6cHJvZmlsZS5waWN0dXJlLFxuICAgICAgICBuYW1lOnByb2ZpbGUubmFtZVxuICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIF0sXG4gIGNhbGxiYWNrczoge1xuICAgIFxuICAgIHNlc3Npb24oeyBzZXNzaW9uLCB1c2VyIH0pIHtcbiAgICAgIHNlc3Npb24udXNlci5yb2xlID0gdXNlci5yb2xlXG5cbiAgICAgIGNvbnNvbGUubG9nKHNlc3Npb24pXG4gICAgICByZXR1cm4gc2Vzc2lvblxuICAgICAgLy8gY29uc29sZS5sb2codXNlcilcbiAgICB9XG5cbiAgfSxcbiAgLy8gY2FsbGJhY2tzOiB7XG4gIC8vICAgYXN5bmMgand0KHRva2VuLCB1c2VyKSB7XG4gIC8vICAgICBpZiAodXNlcikge1xuICAvLyAgICAgICB0b2tlbi5yb2xlID0gdXNlci5yb2xlO1xuICAvLyAgICAgICAvLyBBZGQgb3RoZXIgcHJvcGVydGllcyBpZiBuZWNlc3NhcnlcbiAgLy8gICAgIH1cbiAgLy8gICAgIHJldHVybiB0b2tlbjtcbiAgLy8gICB9LFxuICAvLyAgIGFzeW5jIHNlc3Npb24oc2Vzc2lvbiwgdG9rZW4pIHtcbiAgLy8gICAgIHNlc3Npb24udXNlci5yb2xlID0gdG9rZW4ucm9sZTtcbiAgLy8gICAgIC8vIEFkZCBvdGhlciBwcm9wZXJ0aWVzIGlmIG5lY2Vzc2FyeVxuICAvLyAgICAgcmV0dXJuIHNlc3Npb247XG4gIC8vICAgfSxcbiAgLy8gfSxcbiAgXG5cblxuICBhZGFwdGVyOiBGaXJlc3RvcmVBZGFwdGVyKHtcbiAgICBjcmVkZW50aWFsOiBjZXJ0KHtcbiAgICAgIHByb2plY3RJZDogcHJvY2Vzcy5lbnYuRklSRUJBU0VfUFJPSkVDVF9JRCxcbiAgICAgIGNsaWVudEVtYWlsOiBwcm9jZXNzLmVudi5GSVJFQkFTRV9DTElFTlRfRU1BSUwsXG4gICAgICBwcml2YXRlS2V5OiBwcm9jZXNzLmVudi5GSVJFQkFTRV9QUklWQVRFX0tFWSEucmVwbGFjZSgvXFxcXG4vZywgJ1xcbicpLFxuICAgIH0pLFxuICB9KSBhcyBBZGFwdGVyXG59XG5leHBvcnQgZGVmYXVsdCBOZXh0QXV0aChhdXRoT3B0aW9ucykiXSwibmFtZXMiOlsiRmlyZXN0b3JlQWRhcHRlciIsImNlcnQiLCJOZXh0QXV0aCIsIkdvb2dsZVByb3ZpZGVyIiwiYXV0aE9wdGlvbnMiLCJwcm92aWRlcnMiLCJjbGllbnRJZCIsInByb2Nlc3MiLCJlbnYiLCJHT09HTEVfQ0xJRU5UX0lEIiwiY2xpZW50U2VjcmV0IiwiR09PR0xFX0NMSUVOVF9TRUNSRVQiLCJwcm9maWxlIiwiY29uc29sZSIsImxvZyIsInJvbGUiLCJlbWFpbCIsImlkIiwic3ViIiwiaW1hZ2UiLCJwaWN0dXJlIiwibmFtZSIsImNhbGxiYWNrcyIsInNlc3Npb24iLCJ1c2VyIiwiYWRhcHRlciIsImNyZWRlbnRpYWwiLCJwcm9qZWN0SWQiLCJGSVJFQkFTRV9QUk9KRUNUX0lEIiwiY2xpZW50RW1haWwiLCJGSVJFQkFTRV9DTElFTlRfRU1BSUwiLCJwcml2YXRlS2V5IiwiRklSRUJBU0VfUFJJVkFURV9LRVkiLCJyZXBsYWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/auth/[...nextauth].ts\n");

/***/ }),

/***/ "(api)/./node_modules/next/dist/server/future/route-kind.js":
/*!************************************************************!*\
  !*** ./node_modules/next/dist/server/future/route-kind.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"RouteKind\", ({\n    enumerable: true,\n    get: function() {\n        return RouteKind;\n    }\n}));\nvar RouteKind;\n(function(RouteKind) {\n    RouteKind[/**\n   * `PAGES` represents all the React pages that are under `pages/`.\n   */ \"PAGES\"] = \"PAGES\";\n    RouteKind[/**\n   * `PAGES_API` represents all the API routes under `pages/api/`.\n   */ \"PAGES_API\"] = \"PAGES_API\";\n    RouteKind[/**\n   * `APP_PAGE` represents all the React pages that are under `app/` with the\n   * filename of `page.{j,t}s{,x}`.\n   */ \"APP_PAGE\"] = \"APP_PAGE\";\n    RouteKind[/**\n   * `APP_ROUTE` represents all the API routes and metadata routes that are under `app/` with the\n   * filename of `route.{j,t}s{,x}`.\n   */ \"APP_ROUTE\"] = \"APP_ROUTE\";\n})(RouteKind || (RouteKind = {}));\n\n//# sourceMappingURL=route-kind.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLDZDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsRUFBQztBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLElBQUksRUFBRSxHQUFHO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixJQUFJLEVBQUUsR0FBRztBQUNsQztBQUNBLENBQUMsOEJBQThCOztBQUUvQiIsInNvdXJjZXMiOlsid2VicGFjazovL3NoYXRlei1pbnRlcnZpZXctZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZC5qcz9mOTkxIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiUm91dGVLaW5kXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBSb3V0ZUtpbmQ7XG4gICAgfVxufSk7XG52YXIgUm91dGVLaW5kO1xuKGZ1bmN0aW9uKFJvdXRlS2luZCkge1xuICAgIFJvdXRlS2luZFsvKipcbiAgICogYFBBR0VTYCByZXByZXNlbnRzIGFsbCB0aGUgUmVhY3QgcGFnZXMgdGhhdCBhcmUgdW5kZXIgYHBhZ2VzL2AuXG4gICAqLyBcIlBBR0VTXCJdID0gXCJQQUdFU1wiO1xuICAgIFJvdXRlS2luZFsvKipcbiAgICogYFBBR0VTX0FQSWAgcmVwcmVzZW50cyBhbGwgdGhlIEFQSSByb3V0ZXMgdW5kZXIgYHBhZ2VzL2FwaS9gLlxuICAgKi8gXCJQQUdFU19BUElcIl0gPSBcIlBBR0VTX0FQSVwiO1xuICAgIFJvdXRlS2luZFsvKipcbiAgICogYEFQUF9QQUdFYCByZXByZXNlbnRzIGFsbCB0aGUgUmVhY3QgcGFnZXMgdGhhdCBhcmUgdW5kZXIgYGFwcC9gIHdpdGggdGhlXG4gICAqIGZpbGVuYW1lIG9mIGBwYWdlLntqLHR9c3sseH1gLlxuICAgKi8gXCJBUFBfUEFHRVwiXSA9IFwiQVBQX1BBR0VcIjtcbiAgICBSb3V0ZUtpbmRbLyoqXG4gICAqIGBBUFBfUk9VVEVgIHJlcHJlc2VudHMgYWxsIHRoZSBBUEkgcm91dGVzIGFuZCBtZXRhZGF0YSByb3V0ZXMgdGhhdCBhcmUgdW5kZXIgYGFwcC9gIHdpdGggdGhlXG4gICAqIGZpbGVuYW1lIG9mIGByb3V0ZS57aix0fXN7LHh9YC5cbiAgICovIFwiQVBQX1JPVVRFXCJdID0gXCJBUFBfUk9VVEVcIjtcbn0pKFJvdXRlS2luZCB8fCAoUm91dGVLaW5kID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cm91dGUta2luZC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/server/future/route-kind.js\n");

/***/ }),

/***/ "(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.js":
/*!********************************************************************************!*\
  !*** ./node_modules/next/dist/server/future/route-modules/pages-api/module.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n0 && (0);\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    PagesAPIRouteModule: function() {\n        return PagesAPIRouteModule;\n    },\n    default: function() {\n        return _default;\n    }\n});\nconst _routemodule = __webpack_require__(/*! ../route-module */ \"../route-module?407b\");\nconst _node = __webpack_require__(/*! ../../../api-utils/node */ \"../../../api-utils/node\");\nclass PagesAPIRouteModule extends _routemodule.RouteModule {\n    /**\n   *\n   * @param req the incoming server request\n   * @param res the outgoing server response\n   * @param context the context for the render\n   */ async render(req, res, context) {\n        await (0, _node.apiResolver)(req, res, context.query, this.userland, {\n            ...context.previewProps,\n            revalidate: context.revalidate,\n            trustHostHeader: context.trustHostHeader,\n            allowedRevalidateHeaderKeys: context.allowedRevalidateHeaderKeys,\n            hostname: context.hostname\n        }, context.minimalMode, context.dev, context.page);\n    }\n}\nconst _default = PagesAPIRouteModule;\n\n//# sourceMappingURL=module.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0YsTUFBTSxDQUdMO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELHFCQUFxQixtQkFBTyxDQUFDLDZDQUFpQjtBQUM5QyxjQUFjLG1CQUFPLENBQUMsd0RBQXlCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL3NoYXRlei1pbnRlcnZpZXctZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmpzPzE2NGMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG4wICYmIChtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBQYWdlc0FQSVJvdXRlTW9kdWxlOiBudWxsLFxuICAgIGRlZmF1bHQ6IG51bGxcbn0pO1xuZnVuY3Rpb24gX2V4cG9ydCh0YXJnZXQsIGFsbCkge1xuICAgIGZvcih2YXIgbmFtZSBpbiBhbGwpT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgbmFtZSwge1xuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQ6IGFsbFtuYW1lXVxuICAgIH0pO1xufVxuX2V4cG9ydChleHBvcnRzLCB7XG4gICAgUGFnZXNBUElSb3V0ZU1vZHVsZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBQYWdlc0FQSVJvdXRlTW9kdWxlO1xuICAgIH0sXG4gICAgZGVmYXVsdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBfZGVmYXVsdDtcbiAgICB9XG59KTtcbmNvbnN0IF9yb3V0ZW1vZHVsZSA9IHJlcXVpcmUoXCIuLi9yb3V0ZS1tb2R1bGVcIik7XG5jb25zdCBfbm9kZSA9IHJlcXVpcmUoXCIuLi8uLi8uLi9hcGktdXRpbHMvbm9kZVwiKTtcbmNsYXNzIFBhZ2VzQVBJUm91dGVNb2R1bGUgZXh0ZW5kcyBfcm91dGVtb2R1bGUuUm91dGVNb2R1bGUge1xuICAgIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gcmVxIHRoZSBpbmNvbWluZyBzZXJ2ZXIgcmVxdWVzdFxuICAgKiBAcGFyYW0gcmVzIHRoZSBvdXRnb2luZyBzZXJ2ZXIgcmVzcG9uc2VcbiAgICogQHBhcmFtIGNvbnRleHQgdGhlIGNvbnRleHQgZm9yIHRoZSByZW5kZXJcbiAgICovIGFzeW5jIHJlbmRlcihyZXEsIHJlcywgY29udGV4dCkge1xuICAgICAgICBhd2FpdCAoMCwgX25vZGUuYXBpUmVzb2x2ZXIpKHJlcSwgcmVzLCBjb250ZXh0LnF1ZXJ5LCB0aGlzLnVzZXJsYW5kLCB7XG4gICAgICAgICAgICAuLi5jb250ZXh0LnByZXZpZXdQcm9wcyxcbiAgICAgICAgICAgIHJldmFsaWRhdGU6IGNvbnRleHQucmV2YWxpZGF0ZSxcbiAgICAgICAgICAgIHRydXN0SG9zdEhlYWRlcjogY29udGV4dC50cnVzdEhvc3RIZWFkZXIsXG4gICAgICAgICAgICBhbGxvd2VkUmV2YWxpZGF0ZUhlYWRlcktleXM6IGNvbnRleHQuYWxsb3dlZFJldmFsaWRhdGVIZWFkZXJLZXlzLFxuICAgICAgICAgICAgaG9zdG5hbWU6IGNvbnRleHQuaG9zdG5hbWVcbiAgICAgICAgfSwgY29udGV4dC5taW5pbWFsTW9kZSwgY29udGV4dC5kZXYsIGNvbnRleHQucGFnZSk7XG4gICAgfVxufVxuY29uc3QgX2RlZmF1bHQgPSBQYWdlc0FQSVJvdXRlTW9kdWxlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1tb2R1bGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.js\n");

/***/ }),

/***/ "(api)/./node_modules/@auth/firebase-adapter/index.js":
/*!******************************************************!*\
  !*** ./node_modules/@auth/firebase-adapter/index.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FirestoreAdapter: () => (/* binding */ FirestoreAdapter),\n/* harmony export */   collectionsFactory: () => (/* binding */ collectionsFactory),\n/* harmony export */   getDoc: () => (/* binding */ getDoc),\n/* harmony export */   getOneDoc: () => (/* binding */ getOneDoc),\n/* harmony export */   initFirestore: () => (/* binding */ initFirestore),\n/* harmony export */   mapFieldsFactory: () => (/* binding */ mapFieldsFactory)\n/* harmony export */ });\n/* harmony import */ var firebase_admin_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase-admin/app */ \"firebase-admin/app\");\n/* harmony import */ var firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase-admin/firestore */ \"firebase-admin/firestore\");\n/**\n * <div style={{display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", padding: 16}}>\n * <span>\n *  Official <b>Firebase</b> adapter for Auth.js / NextAuth.js,\n *  using the <a href=\"https://firebase.google.com/docs/admin/setup\">Firebase Admin SDK</a>\n *  &nbsp;and <a href=\"https://firebase.google.com/docs/firestore\">Firestore</a>.</span>\n * <a href=\"https://firebase.google.com/\">\n *   <img style={{display: \"block\"}} src=\"https://authjs.dev/img/adapters/firebase.svg\" height=\"48\" width=\"48\"/>\n * </a>\n * </div>\n *\n * ## Installation\n *\n * ```bash npm2yarn2pnpm\n * npm install @auth/firebase-adapter firebase-admin\n * ```\n *\n * @module @auth/firebase-adapter\n */\n\n\n/**\n * ## Setup\n *\n * First, create a Firebase project and generate a service account key. Visit: `https://console.firebase.google.com/u/0/project/{project-id}/settings/serviceaccounts/adminsdk` (replace `{project-id}` with your project's id)\n *\n * Now you have a few options to authenticate with the Firebase Admin SDK in your app:\n *\n * ### Environment variables\n *  - Download the service account key and save it in your project. (Make sure to add the file to your `.gitignore`!)\n *  - Add [`GOOGLE_APPLICATION_CREDENTIALS`](https://cloud.google.com/docs/authentication/application-default-credentials#GAC) to your environment variables and point it to the service account key file.\n *  - The adapter will automatically pick up the environment variable and use it to authenticate with the Firebase Admin SDK.\n *\n * @example\n * ```ts title=\"pages/api/auth/[...nextauth].ts\"\n * import NextAuth from \"next-auth\"\n * import { FirestoreAdapter } from \"@auth/firebase-adapter\"\n *\n * export default NextAuth({\n *   adapter: FirestoreAdapter(),\n *   // ...\n * })\n * ```\n *\n * ### Service account values\n *\n * - Download the service account key to a temporary location. (Make sure to not commit this file to your repository!)\n * - Add the following environment variables to your project: `FIREBASE_PROJECT_ID`, `FIREBASE_CLIENT_EMAIL`, `FIREBASE_PRIVATE_KEY`.\n * - Pass the config to the adapter, using the environment variables as shown in the example below.\n *\n * @example\n * ```ts title=\"pages/api/auth/[...nextauth].ts\"\n * import NextAuth from \"next-auth\"\n * import { FirestoreAdapter } from \"@auth/firebase-adapter\"\n * import { cert } from \"firebase-admin/app\"\n *\n * export default NextAuth({\n *  adapter: FirestoreAdapter({\n *    credential: cert({\n *      projectId: process.env.FIREBASE_PROJECT_ID,\n *      clientEmail: process.env.FIREBASE_CLIENT_EMAIL,\n *      privateKey: process.env.FIREBASE_PRIVATE_KEY,\n *    })\n *  })\n *  // ...\n * })\n * ```\n *\n * ### Using an existing Firestore instance\n *\n * If you already have a Firestore instance, you can pass that to the adapter directly instead.\n *\n * :::note\n * When passing an instance and in a serverless environment, remember to handle duplicate app initialization.\n * :::\n *\n * :::tip\n * You can use the {@link initFirestore} utility to initialize the app and get an instance safely.\n * :::\n *\n * @example\n * ```ts title=\"pages/api/auth/[...nextauth].ts\"\n * import NextAuth from \"next-auth\"\n * import { FirestoreAdapter } from \"@auth/firebase-adapter\"\n * import { firestore } from \"lib/firestore\"\n *\n * export default NextAuth({\n *  adapter: FirestoreAdapter(firestore),\n *  // ...\n * })\n * ```\n */\nfunction FirestoreAdapter(config) {\n    const { db, namingStrategy = \"default\" } = config instanceof firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_1__.Firestore\n        ? { db: config }\n        : { ...config, db: config?.firestore ?? initFirestore(config) };\n    const preferSnakeCase = namingStrategy === \"snake_case\";\n    const C = collectionsFactory(db, preferSnakeCase);\n    const mapper = mapFieldsFactory(preferSnakeCase);\n    return {\n        async createUser(userInit) {\n            const { id: userId } = await C.users.add(userInit);\n            const user = await getDoc(C.users.doc(userId));\n            if (!user)\n                throw new Error(\"[createUser] Failed to fetch created user\");\n            return user;\n        },\n        async getUser(id) {\n            return await getDoc(C.users.doc(id));\n        },\n        async getUserByEmail(email) {\n            return await getOneDoc(C.users.where(\"email\", \"==\", email));\n        },\n        async getUserByAccount({ provider, providerAccountId }) {\n            const account = await getOneDoc(C.accounts\n                .where(\"provider\", \"==\", provider)\n                .where(mapper.toDb(\"providerAccountId\"), \"==\", providerAccountId));\n            if (!account)\n                return null;\n            return await getDoc(C.users.doc(account.userId));\n        },\n        async updateUser(partialUser) {\n            if (!partialUser.id)\n                throw new Error(\"[updateUser] Missing id\");\n            const userRef = C.users.doc(partialUser.id);\n            await userRef.set(partialUser, { merge: true });\n            const user = await getDoc(userRef);\n            if (!user)\n                throw new Error(\"[updateUser] Failed to fetch updated user\");\n            return user;\n        },\n        async deleteUser(userId) {\n            await db.runTransaction(async (transaction) => {\n                const accounts = await C.accounts\n                    .where(mapper.toDb(\"userId\"), \"==\", userId)\n                    .get();\n                const sessions = await C.sessions\n                    .where(mapper.toDb(\"userId\"), \"==\", userId)\n                    .get();\n                transaction.delete(C.users.doc(userId));\n                accounts.forEach((account) => transaction.delete(account.ref));\n                sessions.forEach((session) => transaction.delete(session.ref));\n            });\n        },\n        async linkAccount(accountInit) {\n            const ref = await C.accounts.add(accountInit);\n            const account = await ref.get().then((doc) => doc.data());\n            return account ?? null;\n        },\n        async unlinkAccount({ provider, providerAccountId }) {\n            await deleteDocs(C.accounts\n                .where(\"provider\", \"==\", provider)\n                .where(mapper.toDb(\"providerAccountId\"), \"==\", providerAccountId)\n                .limit(1));\n        },\n        async createSession(sessionInit) {\n            const ref = await C.sessions.add(sessionInit);\n            const session = await ref.get().then((doc) => doc.data());\n            if (session)\n                return session ?? null;\n            throw new Error(\"[createSession] Failed to fetch created session\");\n        },\n        async getSessionAndUser(sessionToken) {\n            const session = await getOneDoc(C.sessions.where(mapper.toDb(\"sessionToken\"), \"==\", sessionToken));\n            if (!session)\n                return null;\n            const user = await getDoc(C.users.doc(session.userId));\n            if (!user)\n                return null;\n            return { session, user };\n        },\n        async updateSession(partialSession) {\n            const sessionId = await db.runTransaction(async (transaction) => {\n                const sessionSnapshot = (await transaction.get(C.sessions\n                    .where(mapper.toDb(\"sessionToken\"), \"==\", partialSession.sessionToken)\n                    .limit(1))).docs[0];\n                if (!sessionSnapshot?.exists)\n                    return null;\n                transaction.set(sessionSnapshot.ref, partialSession, { merge: true });\n                return sessionSnapshot.id;\n            });\n            if (!sessionId)\n                return null;\n            const session = await getDoc(C.sessions.doc(sessionId));\n            if (session)\n                return session;\n            throw new Error(\"[updateSession] Failed to fetch updated session\");\n        },\n        async deleteSession(sessionToken) {\n            await deleteDocs(C.sessions\n                .where(mapper.toDb(\"sessionToken\"), \"==\", sessionToken)\n                .limit(1));\n        },\n        async createVerificationToken(verificationToken) {\n            await C.verification_tokens.add(verificationToken);\n            return verificationToken;\n        },\n        async useVerificationToken({ identifier, token }) {\n            const verificationTokenSnapshot = (await C.verification_tokens\n                .where(\"identifier\", \"==\", identifier)\n                .where(\"token\", \"==\", token)\n                .limit(1)\n                .get()).docs[0];\n            if (!verificationTokenSnapshot)\n                return null;\n            const data = verificationTokenSnapshot.data();\n            await verificationTokenSnapshot.ref.delete();\n            return data;\n        },\n    };\n}\n// for consistency, store all fields as snake_case in the database\nconst MAP_TO_FIRESTORE = {\n    userId: \"user_id\",\n    sessionToken: \"session_token\",\n    providerAccountId: \"provider_account_id\",\n    emailVerified: \"email_verified\",\n};\nconst MAP_FROM_FIRESTORE = {};\nfor (const key in MAP_TO_FIRESTORE) {\n    MAP_FROM_FIRESTORE[MAP_TO_FIRESTORE[key]] = key;\n}\nconst identity = (x) => x;\n/** @internal */\nfunction mapFieldsFactory(preferSnakeCase) {\n    if (preferSnakeCase) {\n        return {\n            toDb: (field) => MAP_TO_FIRESTORE[field] ?? field,\n            fromDb: (field) => MAP_FROM_FIRESTORE[field] ?? field,\n        };\n    }\n    return { toDb: identity, fromDb: identity };\n}\n/** @internal */\nfunction getConverter(options) {\n    const mapper = mapFieldsFactory(options?.preferSnakeCase ?? false);\n    return {\n        toFirestore(object) {\n            const document = {};\n            for (const key in object) {\n                if (key === \"id\")\n                    continue;\n                const value = object[key];\n                if (value !== undefined) {\n                    document[mapper.toDb(key)] = value;\n                }\n                else {\n                    console.warn(`FirebaseAdapter: value for key \"${key}\" is undefined`);\n                }\n            }\n            return document;\n        },\n        fromFirestore(snapshot) {\n            const document = snapshot.data(); // we can guarantee it exists\n            const object = {};\n            if (!options?.excludeId) {\n                object.id = snapshot.id;\n            }\n            for (const key in document) {\n                let value = document[key];\n                if (value instanceof firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_1__.Timestamp)\n                    value = value.toDate();\n                object[mapper.fromDb(key)] = value;\n            }\n            return object;\n        },\n    };\n}\n/** @internal */\nasync function getOneDoc(querySnapshot) {\n    const querySnap = await querySnapshot.limit(1).get();\n    return querySnap.docs[0]?.data() ?? null;\n}\n/** @internal */\nasync function deleteDocs(querySnapshot) {\n    const querySnap = await querySnapshot.get();\n    for (const doc of querySnap.docs) {\n        await doc.ref.delete();\n    }\n}\n/** @internal */\nasync function getDoc(docRef) {\n    const docSnap = await docRef.get();\n    return docSnap.data() ?? null;\n}\n/** @internal */\nfunction collectionsFactory(db, preferSnakeCase = false) {\n    return {\n        users: db\n            .collection(\"users\")\n            .withConverter(getConverter({ preferSnakeCase })),\n        sessions: db\n            .collection(\"sessions\")\n            .withConverter(getConverter({ preferSnakeCase })),\n        accounts: db\n            .collection(\"accounts\")\n            .withConverter(getConverter({ preferSnakeCase })),\n        verification_tokens: db\n            .collection(preferSnakeCase ? \"verification_tokens\" : \"verificationTokens\")\n            .withConverter(getConverter({ preferSnakeCase, excludeId: true })),\n    };\n}\n/**\n * Utility function that helps making sure that there is no duplicate app initialization issues in serverless environments.\n * If no parameter is passed, it will use the `GOOGLE_APPLICATION_CREDENTIALS` environment variable to initialize a Firestore instance.\n *\n * @example\n * ```ts title=\"lib/firestore.ts\"\n * import { initFirestore } from \"@auth/firebase-adapter\"\n * import { cert } from \"firebase-admin/app\"\n *\n * export const firestore = initFirestore({\n *  credential: cert({\n *    projectId: process.env.FIREBASE_PROJECT_ID,\n *    clientEmail: process.env.FIREBASE_CLIENT_EMAIL,\n *    privateKey: process.env.FIREBASE_PRIVATE_KEY,\n *  })\n * })\n * ```\n */\nfunction initFirestore(options = {}) {\n    const apps = (0,firebase_admin_app__WEBPACK_IMPORTED_MODULE_0__.getApps)();\n    const app = options.name ? apps.find((a) => a.name === options.name) : apps[0];\n    if (app)\n        return (0,firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_1__.getFirestore)(app);\n    return (0,firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_1__.initializeFirestore)((0,firebase_admin_app__WEBPACK_IMPORTED_MODULE_0__.initializeApp)(options, options.name));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvQGF1dGgvZmlyZWJhc2UtYWRhcHRlci9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBQ0EsZ0JBQWdCLHFGQUFxRjtBQUNyRztBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxrQkFBa0IsbUJBQW1CO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDNEQ7QUFDd0M7QUFDcEc7QUFDQTtBQUNBO0FBQ0EsaUlBQWlJLFdBQVcsK0NBQStDLFdBQVc7QUFDdE07QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksbUJBQW1CO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG1CQUFtQjtBQUMvQixZQUFZLE9BQU87QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IscUJBQXFCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG1CQUFtQjtBQUMvQixZQUFZLFlBQVk7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNPO0FBQ1AsWUFBWSxpQ0FBaUMsb0JBQW9CLCtEQUFTO0FBQzFFLFlBQVk7QUFDWixZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixhQUFhO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVCxpQ0FBaUMsNkJBQTZCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxhQUFhO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULDhCQUE4Qiw2QkFBNkI7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RSxhQUFhO0FBQ3BGO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QscUNBQXFDLG1CQUFtQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRUFBb0UsSUFBSTtBQUN4RTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSw4Q0FBOEM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLCtEQUFTO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxpQkFBaUI7QUFDM0Q7QUFDQTtBQUNBLDBDQUEwQyxpQkFBaUI7QUFDM0Q7QUFDQTtBQUNBLDBDQUEwQyxpQkFBaUI7QUFDM0Q7QUFDQTtBQUNBLDBDQUEwQyxrQ0FBa0M7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZ0JBQWdCO0FBQzVCLFlBQVksT0FBTztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7QUFDTyxtQ0FBbUM7QUFDMUMsaUJBQWlCLDJEQUFPO0FBQ3hCO0FBQ0E7QUFDQSxlQUFlLHNFQUFZO0FBQzNCLFdBQVcsNkVBQW1CLENBQUMsaUVBQWE7QUFDNUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zaGF0ZXotaW50ZXJ2aWV3LWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0BhdXRoL2ZpcmViYXNlLWFkYXB0ZXIvaW5kZXguanM/YmM5ZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIDxkaXYgc3R5bGU9e3tkaXNwbGF5OiBcImZsZXhcIiwganVzdGlmeUNvbnRlbnQ6IFwic3BhY2UtYmV0d2VlblwiLCBhbGlnbkl0ZW1zOiBcImNlbnRlclwiLCBwYWRkaW5nOiAxNn19PlxuICogPHNwYW4+XG4gKiAgT2ZmaWNpYWwgPGI+RmlyZWJhc2U8L2I+IGFkYXB0ZXIgZm9yIEF1dGguanMgLyBOZXh0QXV0aC5qcyxcbiAqICB1c2luZyB0aGUgPGEgaHJlZj1cImh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2FkbWluL3NldHVwXCI+RmlyZWJhc2UgQWRtaW4gU0RLPC9hPlxuICogICZuYnNwO2FuZCA8YSBocmVmPVwiaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvZmlyZXN0b3JlXCI+RmlyZXN0b3JlPC9hPi48L3NwYW4+XG4gKiA8YSBocmVmPVwiaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL1wiPlxuICogICA8aW1nIHN0eWxlPXt7ZGlzcGxheTogXCJibG9ja1wifX0gc3JjPVwiaHR0cHM6Ly9hdXRoanMuZGV2L2ltZy9hZGFwdGVycy9maXJlYmFzZS5zdmdcIiBoZWlnaHQ9XCI0OFwiIHdpZHRoPVwiNDhcIi8+XG4gKiA8L2E+XG4gKiA8L2Rpdj5cbiAqXG4gKiAjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBgYGBiYXNoIG5wbTJ5YXJuMnBucG1cbiAqIG5wbSBpbnN0YWxsIEBhdXRoL2ZpcmViYXNlLWFkYXB0ZXIgZmlyZWJhc2UtYWRtaW5cbiAqIGBgYFxuICpcbiAqIEBtb2R1bGUgQGF1dGgvZmlyZWJhc2UtYWRhcHRlclxuICovXG5pbXBvcnQgeyBnZXRBcHBzLCBpbml0aWFsaXplQXBwIH0gZnJvbSBcImZpcmViYXNlLWFkbWluL2FwcFwiO1xuaW1wb3J0IHsgRmlyZXN0b3JlLCBnZXRGaXJlc3RvcmUsIGluaXRpYWxpemVGaXJlc3RvcmUsIFRpbWVzdGFtcCwgfSBmcm9tIFwiZmlyZWJhc2UtYWRtaW4vZmlyZXN0b3JlXCI7XG4vKipcbiAqICMjIFNldHVwXG4gKlxuICogRmlyc3QsIGNyZWF0ZSBhIEZpcmViYXNlIHByb2plY3QgYW5kIGdlbmVyYXRlIGEgc2VydmljZSBhY2NvdW50IGtleS4gVmlzaXQ6IGBodHRwczovL2NvbnNvbGUuZmlyZWJhc2UuZ29vZ2xlLmNvbS91LzAvcHJvamVjdC97cHJvamVjdC1pZH0vc2V0dGluZ3Mvc2VydmljZWFjY291bnRzL2FkbWluc2RrYCAocmVwbGFjZSBge3Byb2plY3QtaWR9YCB3aXRoIHlvdXIgcHJvamVjdCdzIGlkKVxuICpcbiAqIE5vdyB5b3UgaGF2ZSBhIGZldyBvcHRpb25zIHRvIGF1dGhlbnRpY2F0ZSB3aXRoIHRoZSBGaXJlYmFzZSBBZG1pbiBTREsgaW4geW91ciBhcHA6XG4gKlxuICogIyMjIEVudmlyb25tZW50IHZhcmlhYmxlc1xuICogIC0gRG93bmxvYWQgdGhlIHNlcnZpY2UgYWNjb3VudCBrZXkgYW5kIHNhdmUgaXQgaW4geW91ciBwcm9qZWN0LiAoTWFrZSBzdXJlIHRvIGFkZCB0aGUgZmlsZSB0byB5b3VyIGAuZ2l0aWdub3JlYCEpXG4gKiAgLSBBZGQgW2BHT09HTEVfQVBQTElDQVRJT05fQ1JFREVOVElBTFNgXShodHRwczovL2Nsb3VkLmdvb2dsZS5jb20vZG9jcy9hdXRoZW50aWNhdGlvbi9hcHBsaWNhdGlvbi1kZWZhdWx0LWNyZWRlbnRpYWxzI0dBQykgdG8geW91ciBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYW5kIHBvaW50IGl0IHRvIHRoZSBzZXJ2aWNlIGFjY291bnQga2V5IGZpbGUuXG4gKiAgLSBUaGUgYWRhcHRlciB3aWxsIGF1dG9tYXRpY2FsbHkgcGljayB1cCB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGUgYW5kIHVzZSBpdCB0byBhdXRoZW50aWNhdGUgd2l0aCB0aGUgRmlyZWJhc2UgQWRtaW4gU0RLLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0cyB0aXRsZT1cInBhZ2VzL2FwaS9hdXRoL1suLi5uZXh0YXV0aF0udHNcIlxuICogaW1wb3J0IE5leHRBdXRoIGZyb20gXCJuZXh0LWF1dGhcIlxuICogaW1wb3J0IHsgRmlyZXN0b3JlQWRhcHRlciB9IGZyb20gXCJAYXV0aC9maXJlYmFzZS1hZGFwdGVyXCJcbiAqXG4gKiBleHBvcnQgZGVmYXVsdCBOZXh0QXV0aCh7XG4gKiAgIGFkYXB0ZXI6IEZpcmVzdG9yZUFkYXB0ZXIoKSxcbiAqICAgLy8gLi4uXG4gKiB9KVxuICogYGBgXG4gKlxuICogIyMjIFNlcnZpY2UgYWNjb3VudCB2YWx1ZXNcbiAqXG4gKiAtIERvd25sb2FkIHRoZSBzZXJ2aWNlIGFjY291bnQga2V5IHRvIGEgdGVtcG9yYXJ5IGxvY2F0aW9uLiAoTWFrZSBzdXJlIHRvIG5vdCBjb21taXQgdGhpcyBmaWxlIHRvIHlvdXIgcmVwb3NpdG9yeSEpXG4gKiAtIEFkZCB0aGUgZm9sbG93aW5nIGVudmlyb25tZW50IHZhcmlhYmxlcyB0byB5b3VyIHByb2plY3Q6IGBGSVJFQkFTRV9QUk9KRUNUX0lEYCwgYEZJUkVCQVNFX0NMSUVOVF9FTUFJTGAsIGBGSVJFQkFTRV9QUklWQVRFX0tFWWAuXG4gKiAtIFBhc3MgdGhlIGNvbmZpZyB0byB0aGUgYWRhcHRlciwgdXNpbmcgdGhlIGVudmlyb25tZW50IHZhcmlhYmxlcyBhcyBzaG93biBpbiB0aGUgZXhhbXBsZSBiZWxvdy5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHMgdGl0bGU9XCJwYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdLnRzXCJcbiAqIGltcG9ydCBOZXh0QXV0aCBmcm9tIFwibmV4dC1hdXRoXCJcbiAqIGltcG9ydCB7IEZpcmVzdG9yZUFkYXB0ZXIgfSBmcm9tIFwiQGF1dGgvZmlyZWJhc2UtYWRhcHRlclwiXG4gKiBpbXBvcnQgeyBjZXJ0IH0gZnJvbSBcImZpcmViYXNlLWFkbWluL2FwcFwiXG4gKlxuICogZXhwb3J0IGRlZmF1bHQgTmV4dEF1dGgoe1xuICogIGFkYXB0ZXI6IEZpcmVzdG9yZUFkYXB0ZXIoe1xuICogICAgY3JlZGVudGlhbDogY2VydCh7XG4gKiAgICAgIHByb2plY3RJZDogcHJvY2Vzcy5lbnYuRklSRUJBU0VfUFJPSkVDVF9JRCxcbiAqICAgICAgY2xpZW50RW1haWw6IHByb2Nlc3MuZW52LkZJUkVCQVNFX0NMSUVOVF9FTUFJTCxcbiAqICAgICAgcHJpdmF0ZUtleTogcHJvY2Vzcy5lbnYuRklSRUJBU0VfUFJJVkFURV9LRVksXG4gKiAgICB9KVxuICogIH0pXG4gKiAgLy8gLi4uXG4gKiB9KVxuICogYGBgXG4gKlxuICogIyMjIFVzaW5nIGFuIGV4aXN0aW5nIEZpcmVzdG9yZSBpbnN0YW5jZVxuICpcbiAqIElmIHlvdSBhbHJlYWR5IGhhdmUgYSBGaXJlc3RvcmUgaW5zdGFuY2UsIHlvdSBjYW4gcGFzcyB0aGF0IHRvIHRoZSBhZGFwdGVyIGRpcmVjdGx5IGluc3RlYWQuXG4gKlxuICogOjo6bm90ZVxuICogV2hlbiBwYXNzaW5nIGFuIGluc3RhbmNlIGFuZCBpbiBhIHNlcnZlcmxlc3MgZW52aXJvbm1lbnQsIHJlbWVtYmVyIHRvIGhhbmRsZSBkdXBsaWNhdGUgYXBwIGluaXRpYWxpemF0aW9uLlxuICogOjo6XG4gKlxuICogOjo6dGlwXG4gKiBZb3UgY2FuIHVzZSB0aGUge0BsaW5rIGluaXRGaXJlc3RvcmV9IHV0aWxpdHkgdG8gaW5pdGlhbGl6ZSB0aGUgYXBwIGFuZCBnZXQgYW4gaW5zdGFuY2Ugc2FmZWx5LlxuICogOjo6XG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzIHRpdGxlPVwicGFnZXMvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS50c1wiXG4gKiBpbXBvcnQgTmV4dEF1dGggZnJvbSBcIm5leHQtYXV0aFwiXG4gKiBpbXBvcnQgeyBGaXJlc3RvcmVBZGFwdGVyIH0gZnJvbSBcIkBhdXRoL2ZpcmViYXNlLWFkYXB0ZXJcIlxuICogaW1wb3J0IHsgZmlyZXN0b3JlIH0gZnJvbSBcImxpYi9maXJlc3RvcmVcIlxuICpcbiAqIGV4cG9ydCBkZWZhdWx0IE5leHRBdXRoKHtcbiAqICBhZGFwdGVyOiBGaXJlc3RvcmVBZGFwdGVyKGZpcmVzdG9yZSksXG4gKiAgLy8gLi4uXG4gKiB9KVxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBGaXJlc3RvcmVBZGFwdGVyKGNvbmZpZykge1xuICAgIGNvbnN0IHsgZGIsIG5hbWluZ1N0cmF0ZWd5ID0gXCJkZWZhdWx0XCIgfSA9IGNvbmZpZyBpbnN0YW5jZW9mIEZpcmVzdG9yZVxuICAgICAgICA/IHsgZGI6IGNvbmZpZyB9XG4gICAgICAgIDogeyAuLi5jb25maWcsIGRiOiBjb25maWc/LmZpcmVzdG9yZSA/PyBpbml0RmlyZXN0b3JlKGNvbmZpZykgfTtcbiAgICBjb25zdCBwcmVmZXJTbmFrZUNhc2UgPSBuYW1pbmdTdHJhdGVneSA9PT0gXCJzbmFrZV9jYXNlXCI7XG4gICAgY29uc3QgQyA9IGNvbGxlY3Rpb25zRmFjdG9yeShkYiwgcHJlZmVyU25ha2VDYXNlKTtcbiAgICBjb25zdCBtYXBwZXIgPSBtYXBGaWVsZHNGYWN0b3J5KHByZWZlclNuYWtlQ2FzZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYXN5bmMgY3JlYXRlVXNlcih1c2VySW5pdCkge1xuICAgICAgICAgICAgY29uc3QgeyBpZDogdXNlcklkIH0gPSBhd2FpdCBDLnVzZXJzLmFkZCh1c2VySW5pdCk7XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0RG9jKEMudXNlcnMuZG9jKHVzZXJJZCkpO1xuICAgICAgICAgICAgaWYgKCF1c2VyKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIltjcmVhdGVVc2VyXSBGYWlsZWQgdG8gZmV0Y2ggY3JlYXRlZCB1c2VyXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHVzZXI7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGdldFVzZXIoaWQpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBnZXREb2MoQy51c2Vycy5kb2MoaWQpKTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgZ2V0VXNlckJ5RW1haWwoZW1haWwpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBnZXRPbmVEb2MoQy51c2Vycy53aGVyZShcImVtYWlsXCIsIFwiPT1cIiwgZW1haWwpKTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgZ2V0VXNlckJ5QWNjb3VudCh7IHByb3ZpZGVyLCBwcm92aWRlckFjY291bnRJZCB9KSB7XG4gICAgICAgICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgZ2V0T25lRG9jKEMuYWNjb3VudHNcbiAgICAgICAgICAgICAgICAud2hlcmUoXCJwcm92aWRlclwiLCBcIj09XCIsIHByb3ZpZGVyKVxuICAgICAgICAgICAgICAgIC53aGVyZShtYXBwZXIudG9EYihcInByb3ZpZGVyQWNjb3VudElkXCIpLCBcIj09XCIsIHByb3ZpZGVyQWNjb3VudElkKSk7XG4gICAgICAgICAgICBpZiAoIWFjY291bnQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZ2V0RG9jKEMudXNlcnMuZG9jKGFjY291bnQudXNlcklkKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIHVwZGF0ZVVzZXIocGFydGlhbFVzZXIpIHtcbiAgICAgICAgICAgIGlmICghcGFydGlhbFVzZXIuaWQpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiW3VwZGF0ZVVzZXJdIE1pc3NpbmcgaWRcIik7XG4gICAgICAgICAgICBjb25zdCB1c2VyUmVmID0gQy51c2Vycy5kb2MocGFydGlhbFVzZXIuaWQpO1xuICAgICAgICAgICAgYXdhaXQgdXNlclJlZi5zZXQocGFydGlhbFVzZXIsIHsgbWVyZ2U6IHRydWUgfSk7XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0RG9jKHVzZXJSZWYpO1xuICAgICAgICAgICAgaWYgKCF1c2VyKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlt1cGRhdGVVc2VyXSBGYWlsZWQgdG8gZmV0Y2ggdXBkYXRlZCB1c2VyXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHVzZXI7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGRlbGV0ZVVzZXIodXNlcklkKSB7XG4gICAgICAgICAgICBhd2FpdCBkYi5ydW5UcmFuc2FjdGlvbihhc3luYyAodHJhbnNhY3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IEMuYWNjb3VudHNcbiAgICAgICAgICAgICAgICAgICAgLndoZXJlKG1hcHBlci50b0RiKFwidXNlcklkXCIpLCBcIj09XCIsIHVzZXJJZClcbiAgICAgICAgICAgICAgICAgICAgLmdldCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlc3Npb25zID0gYXdhaXQgQy5zZXNzaW9uc1xuICAgICAgICAgICAgICAgICAgICAud2hlcmUobWFwcGVyLnRvRGIoXCJ1c2VySWRcIiksIFwiPT1cIiwgdXNlcklkKVxuICAgICAgICAgICAgICAgICAgICAuZ2V0KCk7XG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24uZGVsZXRlKEMudXNlcnMuZG9jKHVzZXJJZCkpO1xuICAgICAgICAgICAgICAgIGFjY291bnRzLmZvckVhY2goKGFjY291bnQpID0+IHRyYW5zYWN0aW9uLmRlbGV0ZShhY2NvdW50LnJlZikpO1xuICAgICAgICAgICAgICAgIHNlc3Npb25zLmZvckVhY2goKHNlc3Npb24pID0+IHRyYW5zYWN0aW9uLmRlbGV0ZShzZXNzaW9uLnJlZikpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGxpbmtBY2NvdW50KGFjY291bnRJbml0KSB7XG4gICAgICAgICAgICBjb25zdCByZWYgPSBhd2FpdCBDLmFjY291bnRzLmFkZChhY2NvdW50SW5pdCk7XG4gICAgICAgICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgcmVmLmdldCgpLnRoZW4oKGRvYykgPT4gZG9jLmRhdGEoKSk7XG4gICAgICAgICAgICByZXR1cm4gYWNjb3VudCA/PyBudWxsO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyB1bmxpbmtBY2NvdW50KHsgcHJvdmlkZXIsIHByb3ZpZGVyQWNjb3VudElkIH0pIHtcbiAgICAgICAgICAgIGF3YWl0IGRlbGV0ZURvY3MoQy5hY2NvdW50c1xuICAgICAgICAgICAgICAgIC53aGVyZShcInByb3ZpZGVyXCIsIFwiPT1cIiwgcHJvdmlkZXIpXG4gICAgICAgICAgICAgICAgLndoZXJlKG1hcHBlci50b0RiKFwicHJvdmlkZXJBY2NvdW50SWRcIiksIFwiPT1cIiwgcHJvdmlkZXJBY2NvdW50SWQpXG4gICAgICAgICAgICAgICAgLmxpbWl0KDEpKTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgY3JlYXRlU2Vzc2lvbihzZXNzaW9uSW5pdCkge1xuICAgICAgICAgICAgY29uc3QgcmVmID0gYXdhaXQgQy5zZXNzaW9ucy5hZGQoc2Vzc2lvbkluaXQpO1xuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHJlZi5nZXQoKS50aGVuKChkb2MpID0+IGRvYy5kYXRhKCkpO1xuICAgICAgICAgICAgaWYgKHNlc3Npb24pXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlc3Npb24gPz8gbnVsbDtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIltjcmVhdGVTZXNzaW9uXSBGYWlsZWQgdG8gZmV0Y2ggY3JlYXRlZCBzZXNzaW9uXCIpO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBnZXRTZXNzaW9uQW5kVXNlcihzZXNzaW9uVG9rZW4pIHtcbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRPbmVEb2MoQy5zZXNzaW9ucy53aGVyZShtYXBwZXIudG9EYihcInNlc3Npb25Ub2tlblwiKSwgXCI9PVwiLCBzZXNzaW9uVG9rZW4pKTtcbiAgICAgICAgICAgIGlmICghc2Vzc2lvbilcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXREb2MoQy51c2Vycy5kb2Moc2Vzc2lvbi51c2VySWQpKTtcbiAgICAgICAgICAgIGlmICghdXNlcilcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiB7IHNlc3Npb24sIHVzZXIgfTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgdXBkYXRlU2Vzc2lvbihwYXJ0aWFsU2Vzc2lvbikge1xuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbklkID0gYXdhaXQgZGIucnVuVHJhbnNhY3Rpb24oYXN5bmMgKHRyYW5zYWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2Vzc2lvblNuYXBzaG90ID0gKGF3YWl0IHRyYW5zYWN0aW9uLmdldChDLnNlc3Npb25zXG4gICAgICAgICAgICAgICAgICAgIC53aGVyZShtYXBwZXIudG9EYihcInNlc3Npb25Ub2tlblwiKSwgXCI9PVwiLCBwYXJ0aWFsU2Vzc2lvbi5zZXNzaW9uVG9rZW4pXG4gICAgICAgICAgICAgICAgICAgIC5saW1pdCgxKSkpLmRvY3NbMF07XG4gICAgICAgICAgICAgICAgaWYgKCFzZXNzaW9uU25hcHNob3Q/LmV4aXN0cylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24uc2V0KHNlc3Npb25TbmFwc2hvdC5yZWYsIHBhcnRpYWxTZXNzaW9uLCB7IG1lcmdlOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBzZXNzaW9uU25hcHNob3QuaWQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghc2Vzc2lvbklkKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldERvYyhDLnNlc3Npb25zLmRvYyhzZXNzaW9uSWQpKTtcbiAgICAgICAgICAgIGlmIChzZXNzaW9uKVxuICAgICAgICAgICAgICAgIHJldHVybiBzZXNzaW9uO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiW3VwZGF0ZVNlc3Npb25dIEZhaWxlZCB0byBmZXRjaCB1cGRhdGVkIHNlc3Npb25cIik7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGRlbGV0ZVNlc3Npb24oc2Vzc2lvblRva2VuKSB7XG4gICAgICAgICAgICBhd2FpdCBkZWxldGVEb2NzKEMuc2Vzc2lvbnNcbiAgICAgICAgICAgICAgICAud2hlcmUobWFwcGVyLnRvRGIoXCJzZXNzaW9uVG9rZW5cIiksIFwiPT1cIiwgc2Vzc2lvblRva2VuKVxuICAgICAgICAgICAgICAgIC5saW1pdCgxKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGNyZWF0ZVZlcmlmaWNhdGlvblRva2VuKHZlcmlmaWNhdGlvblRva2VuKSB7XG4gICAgICAgICAgICBhd2FpdCBDLnZlcmlmaWNhdGlvbl90b2tlbnMuYWRkKHZlcmlmaWNhdGlvblRva2VuKTtcbiAgICAgICAgICAgIHJldHVybiB2ZXJpZmljYXRpb25Ub2tlbjtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgdXNlVmVyaWZpY2F0aW9uVG9rZW4oeyBpZGVudGlmaWVyLCB0b2tlbiB9KSB7XG4gICAgICAgICAgICBjb25zdCB2ZXJpZmljYXRpb25Ub2tlblNuYXBzaG90ID0gKGF3YWl0IEMudmVyaWZpY2F0aW9uX3Rva2Vuc1xuICAgICAgICAgICAgICAgIC53aGVyZShcImlkZW50aWZpZXJcIiwgXCI9PVwiLCBpZGVudGlmaWVyKVxuICAgICAgICAgICAgICAgIC53aGVyZShcInRva2VuXCIsIFwiPT1cIiwgdG9rZW4pXG4gICAgICAgICAgICAgICAgLmxpbWl0KDEpXG4gICAgICAgICAgICAgICAgLmdldCgpKS5kb2NzWzBdO1xuICAgICAgICAgICAgaWYgKCF2ZXJpZmljYXRpb25Ub2tlblNuYXBzaG90KVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHZlcmlmaWNhdGlvblRva2VuU25hcHNob3QuZGF0YSgpO1xuICAgICAgICAgICAgYXdhaXQgdmVyaWZpY2F0aW9uVG9rZW5TbmFwc2hvdC5yZWYuZGVsZXRlKCk7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuLy8gZm9yIGNvbnNpc3RlbmN5LCBzdG9yZSBhbGwgZmllbGRzIGFzIHNuYWtlX2Nhc2UgaW4gdGhlIGRhdGFiYXNlXG5jb25zdCBNQVBfVE9fRklSRVNUT1JFID0ge1xuICAgIHVzZXJJZDogXCJ1c2VyX2lkXCIsXG4gICAgc2Vzc2lvblRva2VuOiBcInNlc3Npb25fdG9rZW5cIixcbiAgICBwcm92aWRlckFjY291bnRJZDogXCJwcm92aWRlcl9hY2NvdW50X2lkXCIsXG4gICAgZW1haWxWZXJpZmllZDogXCJlbWFpbF92ZXJpZmllZFwiLFxufTtcbmNvbnN0IE1BUF9GUk9NX0ZJUkVTVE9SRSA9IHt9O1xuZm9yIChjb25zdCBrZXkgaW4gTUFQX1RPX0ZJUkVTVE9SRSkge1xuICAgIE1BUF9GUk9NX0ZJUkVTVE9SRVtNQVBfVE9fRklSRVNUT1JFW2tleV1dID0ga2V5O1xufVxuY29uc3QgaWRlbnRpdHkgPSAoeCkgPT4geDtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXBGaWVsZHNGYWN0b3J5KHByZWZlclNuYWtlQ2FzZSkge1xuICAgIGlmIChwcmVmZXJTbmFrZUNhc2UpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRvRGI6IChmaWVsZCkgPT4gTUFQX1RPX0ZJUkVTVE9SRVtmaWVsZF0gPz8gZmllbGQsXG4gICAgICAgICAgICBmcm9tRGI6IChmaWVsZCkgPT4gTUFQX0ZST01fRklSRVNUT1JFW2ZpZWxkXSA/PyBmaWVsZCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgdG9EYjogaWRlbnRpdHksIGZyb21EYjogaWRlbnRpdHkgfTtcbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmZ1bmN0aW9uIGdldENvbnZlcnRlcihvcHRpb25zKSB7XG4gICAgY29uc3QgbWFwcGVyID0gbWFwRmllbGRzRmFjdG9yeShvcHRpb25zPy5wcmVmZXJTbmFrZUNhc2UgPz8gZmFsc2UpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHRvRmlyZXN0b3JlKG9iamVjdCkge1xuICAgICAgICAgICAgY29uc3QgZG9jdW1lbnQgPSB7fTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG9iamVjdCkge1xuICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IFwiaWRcIilcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBvYmplY3Rba2V5XTtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudFttYXBwZXIudG9EYihrZXkpXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBGaXJlYmFzZUFkYXB0ZXI6IHZhbHVlIGZvciBrZXkgXCIke2tleX1cIiBpcyB1bmRlZmluZWRgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQ7XG4gICAgICAgIH0sXG4gICAgICAgIGZyb21GaXJlc3RvcmUoc25hcHNob3QpIHtcbiAgICAgICAgICAgIGNvbnN0IGRvY3VtZW50ID0gc25hcHNob3QuZGF0YSgpOyAvLyB3ZSBjYW4gZ3VhcmFudGVlIGl0IGV4aXN0c1xuICAgICAgICAgICAgY29uc3Qgb2JqZWN0ID0ge307XG4gICAgICAgICAgICBpZiAoIW9wdGlvbnM/LmV4Y2x1ZGVJZCkge1xuICAgICAgICAgICAgICAgIG9iamVjdC5pZCA9IHNuYXBzaG90LmlkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZG9jdW1lbnQpIHtcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBkb2N1bWVudFtrZXldO1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFRpbWVzdGFtcClcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS50b0RhdGUoKTtcbiAgICAgICAgICAgICAgICBvYmplY3RbbWFwcGVyLmZyb21EYihrZXkpXSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE9uZURvYyhxdWVyeVNuYXBzaG90KSB7XG4gICAgY29uc3QgcXVlcnlTbmFwID0gYXdhaXQgcXVlcnlTbmFwc2hvdC5saW1pdCgxKS5nZXQoKTtcbiAgICByZXR1cm4gcXVlcnlTbmFwLmRvY3NbMF0/LmRhdGEoKSA/PyBudWxsO1xufVxuLyoqIEBpbnRlcm5hbCAqL1xuYXN5bmMgZnVuY3Rpb24gZGVsZXRlRG9jcyhxdWVyeVNuYXBzaG90KSB7XG4gICAgY29uc3QgcXVlcnlTbmFwID0gYXdhaXQgcXVlcnlTbmFwc2hvdC5nZXQoKTtcbiAgICBmb3IgKGNvbnN0IGRvYyBvZiBxdWVyeVNuYXAuZG9jcykge1xuICAgICAgICBhd2FpdCBkb2MucmVmLmRlbGV0ZSgpO1xuICAgIH1cbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXREb2MoZG9jUmVmKSB7XG4gICAgY29uc3QgZG9jU25hcCA9IGF3YWl0IGRvY1JlZi5nZXQoKTtcbiAgICByZXR1cm4gZG9jU25hcC5kYXRhKCkgPz8gbnVsbDtcbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBmdW5jdGlvbiBjb2xsZWN0aW9uc0ZhY3RvcnkoZGIsIHByZWZlclNuYWtlQ2FzZSA9IGZhbHNlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdXNlcnM6IGRiXG4gICAgICAgICAgICAuY29sbGVjdGlvbihcInVzZXJzXCIpXG4gICAgICAgICAgICAud2l0aENvbnZlcnRlcihnZXRDb252ZXJ0ZXIoeyBwcmVmZXJTbmFrZUNhc2UgfSkpLFxuICAgICAgICBzZXNzaW9uczogZGJcbiAgICAgICAgICAgIC5jb2xsZWN0aW9uKFwic2Vzc2lvbnNcIilcbiAgICAgICAgICAgIC53aXRoQ29udmVydGVyKGdldENvbnZlcnRlcih7IHByZWZlclNuYWtlQ2FzZSB9KSksXG4gICAgICAgIGFjY291bnRzOiBkYlxuICAgICAgICAgICAgLmNvbGxlY3Rpb24oXCJhY2NvdW50c1wiKVxuICAgICAgICAgICAgLndpdGhDb252ZXJ0ZXIoZ2V0Q29udmVydGVyKHsgcHJlZmVyU25ha2VDYXNlIH0pKSxcbiAgICAgICAgdmVyaWZpY2F0aW9uX3Rva2VuczogZGJcbiAgICAgICAgICAgIC5jb2xsZWN0aW9uKHByZWZlclNuYWtlQ2FzZSA/IFwidmVyaWZpY2F0aW9uX3Rva2Vuc1wiIDogXCJ2ZXJpZmljYXRpb25Ub2tlbnNcIilcbiAgICAgICAgICAgIC53aXRoQ29udmVydGVyKGdldENvbnZlcnRlcih7IHByZWZlclNuYWtlQ2FzZSwgZXhjbHVkZUlkOiB0cnVlIH0pKSxcbiAgICB9O1xufVxuLyoqXG4gKiBVdGlsaXR5IGZ1bmN0aW9uIHRoYXQgaGVscHMgbWFraW5nIHN1cmUgdGhhdCB0aGVyZSBpcyBubyBkdXBsaWNhdGUgYXBwIGluaXRpYWxpemF0aW9uIGlzc3VlcyBpbiBzZXJ2ZXJsZXNzIGVudmlyb25tZW50cy5cbiAqIElmIG5vIHBhcmFtZXRlciBpcyBwYXNzZWQsIGl0IHdpbGwgdXNlIHRoZSBgR09PR0xFX0FQUExJQ0FUSU9OX0NSRURFTlRJQUxTYCBlbnZpcm9ubWVudCB2YXJpYWJsZSB0byBpbml0aWFsaXplIGEgRmlyZXN0b3JlIGluc3RhbmNlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0cyB0aXRsZT1cImxpYi9maXJlc3RvcmUudHNcIlxuICogaW1wb3J0IHsgaW5pdEZpcmVzdG9yZSB9IGZyb20gXCJAYXV0aC9maXJlYmFzZS1hZGFwdGVyXCJcbiAqIGltcG9ydCB7IGNlcnQgfSBmcm9tIFwiZmlyZWJhc2UtYWRtaW4vYXBwXCJcbiAqXG4gKiBleHBvcnQgY29uc3QgZmlyZXN0b3JlID0gaW5pdEZpcmVzdG9yZSh7XG4gKiAgY3JlZGVudGlhbDogY2VydCh7XG4gKiAgICBwcm9qZWN0SWQ6IHByb2Nlc3MuZW52LkZJUkVCQVNFX1BST0pFQ1RfSUQsXG4gKiAgICBjbGllbnRFbWFpbDogcHJvY2Vzcy5lbnYuRklSRUJBU0VfQ0xJRU5UX0VNQUlMLFxuICogICAgcHJpdmF0ZUtleTogcHJvY2Vzcy5lbnYuRklSRUJBU0VfUFJJVkFURV9LRVksXG4gKiAgfSlcbiAqIH0pXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluaXRGaXJlc3RvcmUob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgYXBwcyA9IGdldEFwcHMoKTtcbiAgICBjb25zdCBhcHAgPSBvcHRpb25zLm5hbWUgPyBhcHBzLmZpbmQoKGEpID0+IGEubmFtZSA9PT0gb3B0aW9ucy5uYW1lKSA6IGFwcHNbMF07XG4gICAgaWYgKGFwcClcbiAgICAgICAgcmV0dXJuIGdldEZpcmVzdG9yZShhcHApO1xuICAgIHJldHVybiBpbml0aWFsaXplRmlyZXN0b3JlKGluaXRpYWxpemVBcHAob3B0aW9ucywgb3B0aW9ucy5uYW1lKSk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/@auth/firebase-adapter/index.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2F%5B...nextauth%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth%5C%5B...nextauth%5D.ts&middlewareConfigBase64=e30%3D!"));
module.exports = __webpack_exports__;

})();